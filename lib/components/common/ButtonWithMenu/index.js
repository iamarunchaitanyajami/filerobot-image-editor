import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import React,{useEffect,useState,useRef}from"react";import{MenuItemLabel}from"@scaleflex/ui/core/menu-item";import{useStore}from"../../../hooks";import{StyledMainButton,StyledButtonWrapper,StyledMenu,StyledMenuItem,StyledMenuIcon}from"./ButtonWithMenu.styled";var ButtonWithMenu=function(a){var b=a.onClick,c=void 0===b?void 0:b,d=a.title,e=void 0===d?"":d,f=a.label,g=void 0===f?"":f,h=a.color,i=void 0===h?"primary":h,j=a.menuFromBtn,k=a.menuItems,l=a.menuPosition,m=void 0===l?"bottom":l,n=a.disabled,o=void 0!==n&&n,p=a.className,q=a.menuStyle,r=a.wrapperStyle,s=a.buttonRef,u=a.noMargin,v=useStore(),w=v.t,t=useRef(!0),x=useState(null),y=_slicedToArray(x,2),z=y[0],A=y[1],B="sm",C=k.filter(Boolean),D=1<C.length,E=function(a){t.current&&A(a.currentTarget)},F=function(){t.current&&A(null)},G=function(a){"function"==typeof a&&a(),F()};return useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),React.createElement(React.Fragment,null,React.createElement(StyledButtonWrapper,{className:"".concat(p,"-wrapper"),style:r,ref:s,noMargin:void 0!==u&&u},React.createElement(StyledMainButton,{className:"".concat(p,"-button"),color:i,size:B,title:e,onClick:o?void 0:function handleButtonClick(a){var b;return void 0!==j&&j&&D?void E(a):void("function"==typeof c?c():null!==(b=C[0])&&void 0!==b&&b.onClick&&C[0].onClick())},disabled:o},g||w("saveAs"))),D&&React.createElement(StyledMenu,{className:"".concat(p,"-menu"),anchorEl:z,onClose:F,open:!0,style:q,position:m},k.map(function(a){return a&&React.createElement(StyledMenuItem,{className:"".concat(p,"-menu-item"),key:a.key,active:a.isActive,onClick:function(){return G(a.onClick)},size:B},a.icon&&React.createElement(StyledMenuIcon,{size:B},"string"==typeof a.icon?React.createElement("span",{dangerouslySetInnerHTML:{__html:a.icon}}):React.createElement(a.icon,null)),React.createElement(MenuItemLabel,null,a.label))})))};export default ButtonWithMenu;