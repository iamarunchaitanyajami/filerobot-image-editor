import React,{useCallback,useEffect,useMemo}from"react";import{SELECT_TOOL}from"../../actions";import{TABS_TOOLS,TOOLS_ITEMS}from"../tools/tools.constants";import{TABS_IDS}from"../../utils/constants";import{useStore}from"../../hooks";import Carousel from"../common/Carousel";import{StyledToolsBar,StyledToolsBarItems}from"./ToolsBar.styled";import ToolsBarItemOptionsWrapper from"./ToolsBarItemOptionsWrapper";var style={maxWidth:"100%",width:"100%"},ToolsBar=function(a){var b,c=a.isPhoneScreen,d=void 0!==c&&c,e=useStore(),f=e.t,g=e.dispatch,h=e.tabId,i=e.toolId,j=e.annotations,k=e.selectionsIds,l=void 0===k?[]:k,m=e.config,n=m.defaultTabId,o=m.defaultToolId,p=m.useCloudimage,q=h||n,r=i||o||(null===(b=TABS_TOOLS[q])||void 0===b?void 0:b[0]),s=useMemo(function(){return TABS_TOOLS[q]||[]},[q]),t=useCallback(function(a){g({type:SELECT_TOOL,payload:{toolId:a}})},[]),u=useMemo(function(){return s.map(function(a){var b=TOOLS_ITEMS[a],c=b.Item,d=b.hideFn;return c&&(!d||!d({useCloudimage:p}))&&React.createElement(c,{key:a,selectTool:t,t:f,isSelected:r===a})})},[s,r]),v=useMemo(function(){var a,b,c;if(!r)return!1;if(q===TABS_IDS.ANNOTATE){var d=l.length;if(1===d){var e,f=j[l[0]];return null===(e=TOOLS_ITEMS[f.name])||void 0===e?void 0:e.ItemOptions}if(1<d)return null}return q&&r&&TABS_TOOLS[q].includes(r)&&(!(null!==(a=TOOLS_ITEMS[i])&&void 0!==a&&a.hideFn)||!(null!==(b=TOOLS_ITEMS[i])&&void 0!==b&&b.hideFn({useCloudimage:p})))&&(null===(c=TOOLS_ITEMS[i])||void 0===c?void 0:c.ItemOptions)},[q,r,j,l]);return useEffect(function(){!i&&r&&g({type:SELECT_TOOL,payload:{toolId:r}})},[]),React.createElement(StyledToolsBar,{className:"FIE_tools-bar-wrapper"},React.createElement(ToolsBarItemOptionsWrapper,{isPhoneScreen:d},v&&React.createElement(v,{t:f})),u&&React.createElement(StyledToolsBarItems,{className:"FIE_tools-bar",isPhoneScreen:d},q===TABS_IDS.WATERMARK?u:React.createElement(Carousel,{className:"FIE_tools",style:style},u)))};export default ToolsBar;